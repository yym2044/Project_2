<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yym.infra.modules.member.MemberMpp">

	<resultMap id="resultMapObj"
		type="com.yym.infra.modules.member.Member"></resultMap>
		
		
	<insert id="insertMember">
	
	INSERT INTO
		infrMember (
			ifmmId
			, ifmmPwd
			, ifmmName
			, ifmmDob
			, ifmmGenderCd
		) VALUES (
			#{ifmmId}
			, #{ifmmPwd}
			, #{ifmmName}
			, #{ifmmDob}
			, #{ifmmGenderCd}
		)
		
	<selectKey resultType="String" keyProperty="ifmmSeq" order="AFTER">
	SELECT last_insert_id()
	</selectKey>
	
	</insert>
	
	<insert id="insertMemberEmail">
	INSERT INTO
		infrMemberEmail (
			ifmmSeq
			, ifmeEmailFull
		) VALUES (
			#{ifmmSeq}
			, #{ifmeEmailFull}
		)
	</insert>
	
	<insert id="insertMemberPhone">
	INSERT INTO
		infrMemberPhone (
			ifmmSeq
			, ifmpNumber
		) VALUES (
			#{ifmmSeq}		
			, #{ifmpNumber}
		)
	</insert>
		
	<select id="selectOneLogin" resultMap="resultMapObj">
		SELECT
			ifmmSeq
			, ifmmAdminNy
			, ifmmId
			, ifmmName
			, ifmmDesc
		FROM
			infrMember
		WHERE 1=1
			AND ifmmId = #{ifmmId}
			AND ifmmPwd = #{ifmmPwd}
	</select>
	
	
	
</mapper>